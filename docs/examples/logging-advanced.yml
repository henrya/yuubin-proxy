# ==============================================================================
# Advanced Logging Example
# ==============================================================================
# Use case: Customizing Apache-style access log formats, enabling file rotation,
# and auditing response details.
#
# Access logs go to EITHER console OR file (never both).
# When fileEnabled is true, access logs go only to the rolling file.
# When fileEnabled is false (default), access logs print to stdout.
# Application logs (startup, shutdown, errors) always print to console.
# Format tokens:
#   %h  = Remote host (client IP)
#   %l  = Remote logname (always "-")
#   %u  = Authenticated username (or "-")
#   %t  = Timestamp [dd/MMM/yyyy:HH:mm:ss Z]
#   %r  = Full request line (e.g., "GET /path HTTP/1.1")
#   %m  = Request method (e.g., GET, POST)
#   %q  = Query string (e.g., ?id=123)
#   %>s = Response status code
#   %b  = Response body size in bytes (or "-")

proxies:
  - name: verbose-proxy
    port: 8080
    type: HTTP
    rules:
      - path: /
        target: http://localhost:3000

logging:
  # Custom Apache-style format with method and query string
  format: '%h %l %u %t "%m %r%q" %>s %b'

  # Log a separate [RESPONSE] line for each request (useful for auditing)
  logResponse: true

  # File rotation â€” switches access logs from console to file
  fileEnabled: true
  filePath: "logs/advanced"          # Directory for log files
  fileName: "access.log"            # Base filename
  rotation: "DAILY"                 # DAILY, WEEKLY, MONTHLY, or SIZE
  maxHistory: 7                     # Keep 7 rotated files

  # For SIZE rotation, also set:
  # rotation: "SIZE"
  # maxSize: "100MB"                # Max size per file before rotation
