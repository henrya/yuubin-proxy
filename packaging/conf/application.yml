# ========================================================================
# Yuubin Proxy Configuration File
#
# This file is the main configuration file for the Yuubin Proxy Server.
# It is designed to act as a secure, high-performance default template
# similar to standard enterprise proxies (e.g., Nginx, Apache).
# ========================================================================

# ------------------------------------------------------------------------
# Global Administrative Settings
# ------------------------------------------------------------------------
admin:
  enabled: true
  port: 9090 # Expose health checks (/health) and Prometheus metrics (/metrics)

# ------------------------------------------------------------------------
# Global Security & Blacklists
# ------------------------------------------------------------------------
# globalBlacklist:
#   - 192.168.1.100

# ------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------
logging:
  fileEnabled: true
  filePath: "/var/log/yuubin-proxy"
  fileName: "yuubin-proxy.log"
  rotation: "DAILY"      # Options: DAILY, WEEKLY, MONTHLY, SIZE
  # maxSize: "100MB"     # Max single file size. Enable if rotation config is SIZE. 
  maxHistory: 30         # Max number of rotated logs to keep before purging
  # Standard combined log format (analogous to Nginx/Apache)
  # %h = Client IP, %l = Identity, %u = User, %t = Time, %m = Method, %r = Path, %q = Query, %s = Status, %b = Bytes
  format: '%h %l %u %t "%m %r%q" %>s %b'
  logResponse: false

# ------------------------------------------------------------------------
# Proxy Server Definitions
# ------------------------------------------------------------------------
proxies:
  # ======================================================================
  # Default HTTP Proxy (Forward/Reverse)
  # ======================================================================
  - name: "default-http"
    type: HTTP
    port: 8080
    timeout: 60000
    maxRedirects: 0
    authEnabled: false
    # Routing and load balancing rules
    # By default, without rules, it behaves as a generic forward proxy (if requests provide absolute URIs).
    # You can configure individual rules to route or chain upstream to specific proxies.
    # 
    # Example Reverse Proxy Rule (API Gateway):
    # rules:
    #   - path: "/v1"
    #     targets:
    #       - "http://127.0.0.1:3000"
    #       - "http://127.0.0.1:3001"
    #     loadBalancing: ROUND_ROBIN
    #
    # Example Rule with Upstream HTTP Proxy Chaining:
    #   - path: "/external-api"
    #     target: "http://api.external.com"
    #     upstreamProxy:
    #       host: "corp-proxy.internal"
    #       port: 3128
    #       type: HTTP

  # ======================================================================
  # Default SOCKS5 Proxy
  # Disabled by default for security. Uncomment to enable.
  # ======================================================================
  # - name: "default-socks5"
  #   type: SOCKS5
  #   port: 1080
  #   authEnabled: false
  #   timeout: 30000
